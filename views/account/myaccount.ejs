<!DOCTYPE html>
<html>

<head>
	<title>
		<%= Title %>
  </title>
    <link rel='stylesheet' href='/stylesheets/mainpage.css' />
    <link rel='stylesheet' href='/stylesheets/myaccount.css' />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>

<body>
    <div id="main">
        <div class="container">

            <%- include('../partials/login-header') %>

            <%- include('../partials/header') %>

        </div>
    </div>

    <div id="content" style="padding-bottom: 50px">
        <div id="topic">
            <p id="topic-name">คำสั่งซื้อของฉัน</p>
        </div>

        <% if (orders && orders.length > 0) { %>
            <% orders.forEach(function (order) { %>
                <div class="order-card">
                    <div id="order-header" class="order-header d-flex justify-content-between align-items-center mb-3">
                        <div>
                            <h5 class="mb-0">Order ID #<%= order.OrderID %></h5>
                        </div>
                        <div class="order-status">
									<span><b>Order Status</b></span><br>
                            <span><%= order.OrderStatus %></span><br>
                        </div>
                    </div>

                    <% order.items.forEach(function (item) { %>
                        <div class="order-details mb-3">
                            <div class="d-flex align-items-center">
                                <img src="<%= item.Image %>" alt="Product" class="order-image me-3">
                                <div class="product-info">
                                    <p class="mb-0"><strong><%= item.ProductName %></strong></p>
                                    <p class="mb-0">x<%= item.Quantity %></p>
                                </div>
                            </div>
                            <div class="text-end">
                                <p>฿<%= item.Price.toFixed(2) %></p>
                            </div>
                        </div>
                    <% }) %>

                    <div id="order-footer" class="d-flex justify-content-between align-items-center">
                        <div>
                           <span>Order Created at 
										<strong><%= order.OrderDate.toLocaleDateString('en-GB', {
										year: 'numeric',
										month: 'short',
										day: '2-digit',
										hour: '2-digit',
    									minute: '2-digit',
										second: '2-digit'
									}); %></strong></span><br>
                        </div>
                        <div class="text-end">
                            <span><b>Order Total : </b><strong class="text-danger">฿<%= order.items.reduce((total, item) => total + item.Price * item.Quantity, 0).toFixed(2) %></strong></span>
                        </div>
                    </div>
                </div>
            <% }) %>
        <% } else { %>
            <p style="text-align: center;">No orders found.</p>
        <% } %>

    </div>

    <%- include('../partials/footer') %>

</body>

</html>
